(function(){function b(a){this.opts=a;this.routes=a.routes;this.sep=a.sep||"";this.go(location.pathname);this.holdLinks(a.links||[]);g=this}if(window){var c=window,d="pushState"in history,e=d?"popstate":"hashchange",g={},f=[/[\-{}\[\]+?.,\\\^$|#\s]/g,/\((.*?)\)/g,/(\(\?)?:\w+/g,/\*\w+/g],l=function(a){a=a.replace(f[0],"\\$&").replace(f[1],"(?:$1)?").replace(f[2],function(a,b){return b?a:"([^/?]+)"}).replace(f[3],"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},h=function(a,k){var b=a.exec(k).slice(1),c=[],d;for(d=0;d<b.length;d++)c.push(decodeURIComponent(b[d])||null);return c};b.prototype.exec=function(a){for(var b in this.routes){var c=l(b);if(c.test(a))if("function"===typeof this.routes[b])this.routes[b].apply(this,h(c,a));else{var d=this.opts[this.routes[b]];d?d.apply(this,h(c,a)):void 0}}};b.prototype.emmit=function(a){a=d?a.state.path:location.href.split("#")[1]||"";g.exec(a)};b.prototype.start=function(){c.addEventListener?c.addEventListener(e,this.emmit,!1):c.attachEvent("on"+e,this.emmit)};b.prototype.stop=function(){c.removeEventListener?c.removeEventListener(e,this.emmit,!1):c.detachEvent("on"+e,this.emmit)};b.prototype.go=function(a){d?history.pushState({path:a},document.title,a):"/"!==this.sep&&(location.hash=this.sep+a);this.exec(a)};b.prototype.back=function(){history.back()};b.prototype.hold=function(a){if(a){var b=a.srcElement.pathname;d||(b="/"+b);this.go(b);if(a&&a.preventDefault)a.preventDefault();else if("/"!==this.sep)return a.returnValue=!1}};b.prototype.holdLinks=function(a){for(var b=0;b<a.length;b++)a[b].onclick=function(a){g.hold(a)}};"object"===typeof exports?module.exports=b:"function"===typeof define&&define.amd?define(function(){return window.MinRouter=b}):window.MinRouter=b}})("undefined"!=typeof window?window:void 0);