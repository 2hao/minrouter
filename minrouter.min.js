(function(){function b(a){this.opts=a;this.routes=a.routes;this.sep=a.sep||"";this.go(location.pathname,!0);this.holdLinks(a.links||[]);k=this}if(window){var c=window,e="pushState"in history,f=e?"popstate":"hashchange",k={},g=[/[\-{}\[\]+?.,\\\^$|#\s]/g,/\((.*?)\)/g,/(\(\?)?:\w+/g,/\*\w+/g],m=function(a){a=a.replace(g[0],"\\$&").replace(g[1],"(?:$1)?").replace(g[2],function(a,h){return h?a:"([^/?]+)"}).replace(g[3],"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},l=function(a,d){var h=a.exec(d).slice(1),b=[],c;for(c=0;c<h.length;c++)b.push(decodeURIComponent(h[c])||null);return b};b.prototype.exec=function(a){for(var d in this.routes){var b=m(d);if(b.test(a))if("function"===typeof this.routes[d])this.routes[d].apply(this,l(b,a));else{var c=this.opts[this.routes[d]];c?c.apply(this,l(b,a)):void 0}}};b.prototype.emmit=function(a){a=e?a.state.path:location.href.split("#")[1]||"";k.exec(a)};b.prototype.start=function(){c.addEventListener?c.addEventListener(f,this.emmit,!1):c.attachEvent("on"+f,this.emmit)};b.prototype.stop=function(){c.removeEventListener?c.removeEventListener(f,this.emmit,!1):c.detachEvent("on"+f,this.emmit)};b.prototype.go=function(a,b){e?b?history.replaceState({path:a},document.title,a):history.pushState({path:a},document.title,a):"/"!==this.sep&&(location.hash=this.sep+a);this.exec(a)};b.prototype.back=function(){history.back()};b.prototype.hold=function(a){if(a){var b=a.srcElement.pathname,c=!1;e?b===history.state.path&&(c=!0):b="/"+b;this.go(b,c);if(a&&a.preventDefault)a.preventDefault();else if("/"!==this.sep)return a.returnValue=!1}};b.prototype.holdLinks=function(a){for(var b=0;b<a.length;b++)a[b].onclick=function(a){k.hold(a)}};"object"===typeof exports?module.exports=b:"function"===typeof define&&define.amd?define(function(){return window.MinRouter=b}):window.MinRouter=b}})("undefined"!=typeof window?window:void 0);