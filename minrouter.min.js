!function(){function h(a){this.opts=a,this.routes=a.routes,this.sep=a.sep||"",this.go(location.pathname,!0),this.holdLinks(a.links||[]),d=this}var a,b,c,d,e,f,g;window&&(a=window,b="pushState"in history,c=b?"popstate":"hashchange",d={},e=[/[\-{}\[\]+?.,\\\^$|#\s]/g,/\((.*?)\)/g,/(\(\?)?:\w+/g,/\*\w+/g],f=function(a){return a=a.replace(e[0],"\\$&").replace(e[1],"(?:$1)?").replace(e[2],function(a,b){return b?a:"([^/?]+)"}).replace(e[3],"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},g=function(a,b){var e,c=a.exec(b).slice(1),d=[];for(e=0;e<c.length;e++)d.push(decodeURIComponent(c[e])||null);return d},h.prototype.exec=function(a){var b,c,d;for(b in this.routes)c=f(b),c.test(a)&&("function"==typeof this.routes[b]?this.routes[b].apply(this,g(c,a)):(d=this.opts[this.routes[b]],d?d.apply(this,g(c,a)):void 0))},h.prototype.emmit=function(a){a=b?a.state.path:location.href.split("#")[1]||"",d.exec(a)},h.prototype.start=function(){a.addEventListener?a.addEventListener(c,this.emmit,!1):a.attachEvent("on"+c,this.emmit)},h.prototype.stop=function(){a.removeEventListener?a.removeEventListener(c,this.emmit,!1):a.detachEvent("on"+c,this.emmit)},h.prototype.go=function(a,c){b?c?history.replaceState({path:a},document.title,a):history.pushState({path:a},document.title,a):"/"!==this.sep&&(location.hash=this.sep+a),this.exec(a)},h.prototype.back=function(){history.back()},h.prototype.hold=function(a,c){var d=!1,e=void 0!==c?c:a.target.pathname;return b?e===history.state.path&&(d=!0):e="/"+e,this.go(e,d),a&&a.preventDefault?(a.preventDefault(),void 0):(a.returnValue=!1,!1)},h.prototype.holdLinks=function(b){for(var c=0;c<b.length;c++)b[c].onclick=function(b){var c;b||(b=a.event,c=this.pathname),d.hold(b,c)}},"object"==typeof exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return window.MinRouter=h}):window.MinRouter=h)}("undefined"!=typeof window?window:void 0);