(function(){function b(a,k){this.routes=a.routes;this.opts=a;this.sep=k||"";this.go(location.pathname);f=this}if(window){var c=window,d="pushState"in history?"popstate":"hashchange",f={},e=[/[\-{}\[\]+?.,\\\^$|#\s]/g,/\((.*?)\)/g,/(\(\?)?:\w+/g,/\*\w+/g],l=function(a){a=a.replace(e[0],"\\$&").replace(e[1],"(?:$1)?").replace(e[2],function(a,b){return b?a:"([^/?]+)"}).replace(e[3],"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},h=function(a,b){var c=a.exec(b).slice(1),g=[],d;for(d=0;d<c.length;d++)g.push(decodeURIComponent(c[d])||null);return g};b.prototype.exec=function(a){for(var b in this.routes){var c=l(b);if(c.test(a))if("function"===typeof this.routes[b])this.routes[b].apply(this,h(c,a));else{var d=this.opts[this.routes[b]];d?d.apply(this,h(c,a)):void 0}}};b.prototype.emmit=function(a){a="pushState"in history?a.state.path:location.href.split("#")[1]||"";f.exec(a)};b.prototype.start=function(){c.addEventListener?c.addEventListener(d,this.emmit,!1):c.attachEvent("on"+d,this.emmit)};b.prototype.stop=function(){c.removeEventListener?c.removeEventListener(d,this.emmit,!1):c.detachEvent("on"+d,this.emmit)};b.prototype.go=function(a){"pushState"in history?history.pushState({path:a},document.title,a):"/"!==this.sep&&(location.hash=this.sep+a);this.exec(a)};b.prototype.hold=function(a){if(a){var b=a.srcElement.pathname;"pushState"in history||(b="/"+b);this.go(b);if(a&&a.preventDefault)a.preventDefault();else if("/"!==this.sep)return a.returnValue=!1}};b.prototype.back=function(){history.back()};"object"===typeof exports?module.exports=b:"function"===typeof define&&define.amd?define(function(){return window.MinRouter=b}):window.MinRouter=b}})("undefined"!=typeof window?window:void 0);